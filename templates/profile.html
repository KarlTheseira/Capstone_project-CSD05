{% extends "base.html" %}
{% block content %}
<h2>My Profile</h2>

<form method="post">
  <label>Email:
    <input type="email" name="email" value="{{ user.email }}" required />
  </label>
  <label>New Password:
    <input type="password" name="password" placeholder="Leave blank to keep current" />
  </label>
  <button type="submit">Update Profile</button>
</form>

<hr />

<h3>My Orders</h3>
{% if orders %}
  <ul>
    {% for order in orders %}
      <li>
        <strong>Order #{{ order.id }}</strong> —
        {{ order.created_at.strftime('%Y-%m-%d') }} —
        {{ order.amount_cents / 100 }} {{ order.currency.upper() }} —
        Status: {{ order.status }}
        <ul>
          {% for item in order.items %}
            <li>{{ item.quantity }} × {{ item.product.title }}</li>
          {% endfor %}
        </ul>
      </li>
    {% endfor %}
  </ul>
{% else %}
  <p>You haven’t placed any orders yet.</p>
{% endif %}
{% endblock %}
